#!/bin/bash

bin=`dirname $0`

cd ${bin}/../

rm -r lib/src/generated
mkdir -p lib/src/generated

protoc -Iproto proto/data.proto --proto_path=proto/ --dart_out=grpc:lib/src/generated

cd lib

file='uniform_data.dart'

echo "library uniform_data;" > $file
echo "" >> $file
echo "///" >> $file
echo "/// This file has been auto-generated by gen.sh, please do not edit." >> $file
echo "///" >> $file
echo "" >> $file
find src/generated/*.pb.dart | awk '{printf "export '\''%s'\'';\n", $1}' >> $file

